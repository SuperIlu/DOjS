BUILD_DIR=win32/
SOURCE_DIR=.
DEPENDENCIES=$(pwd)/..

mkdir -p $BUILD_DIR

cmake -H$SOURCE_DIR -B$BUILD_DIR \
	-Wno-dev \
	-DCMAKE_TOOLCHAIN_FILE=../cmake/Toolchain-mingw.cmake \
	-DZLIB_INCLUDE_DIR=$DEPENDENCIES/zlib-1.3.1 \
	-DZLIB_LIBRARY=$DEPENDENCIES/zlib-1.3.1/libz.a \
	-DPNG_PNG_INCLUDE_DIR=$DEPENDENCIES/lpng1644 \
	-DPNG_LIBRARY=$DEPENDENCIES/lpng1644/libpng.a \
	-DDDRAW_INCLUDE_DIR=$DXINC \
	-DDINPUT_INCLUDE_DIR=$DXINC \
	-DDSOUND_INCLUDE_DIR=$DXINC \
	-DDXGUID_LIBRARY=$DXLIB/libdxguid.a \
	-DDDRAW_LIBRARY=$DXLIB/libddraw.a \
	-DDINPUT_LIBRARY=$DXLIB/libdinput.a \
	-DDSOUND_LIBRARY=$DXLIB/libdsound.a \
	-DWANT_MODULES=off \
	-DWANT_LOADPNG=on \
	-DWANT_JPGALLEG=off \
	-DWANT_EXAMPLES=off \
	-DWANT_ALLEGROGL=off \
	-DWANT_TOOLS=off \
	-DWANT_TESTS=off
